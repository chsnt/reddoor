{"subreddit":{"display_name":"Kotlin"},"subreddit_loc":"Котлин","selftext":"Поэтому я пришел к этой идее поместить любые значения или константы, которые, возможно, придется изменить специально для тестирования / отладки (например, тайм-ауты) в специальный класс данных с конструктором, для которого все свойства имеют значения по умолчанию, например,\n\n    класс данных AppConfig (\n        val lockScreenOrientation: Boolean = true,\n        val requestTimeout: Long = 30 * 1000L\n    )\n\nЗатем я использую Koin (есть и другие интегрированные структуры внедрения зависимостей) для внедрения или управления любыми классами, зависящими от значений, содержащихся в них, определяя его как одноэлементный, чтобы во время выполнения приложения существовал только один экземпляр.\n\nС помощью этого шаблона я могу затем заменить его другим классом AppConfig в тестовом коде и переопределить только те значения, которые мне нужны. Я даже создал класс «Playground» в androidTest, который, если для «active» boolean установлено значение true, запускает приложение с альтернативным экземпляром AppConfig, определенным в самом классе, и спит в тестовом потоке, чтобы вы могли использовать приложение как обычно , (Если «активное» логическое значение равно false, тест просто проходит с тривиальным `assertTrue (true)`, чтобы можно было продолжить автоматическое тестирование). Таким образом, я могу использовать приложение с измененными значениями для ручного тестирования и отладки, не меняя код приложения (и, возможно, забыв изменить его обратно и выпуская приложение с задержкой в ​​одну секунду или чем-то еще)\n\nПричина, по которой я использую это, а не статические значения (либо в объектах, либо просто в пустом файле Kotlin), заключается в том, что в тестах сложно смоделировать или заменить статические значения программно. У меня все еще есть статические константы для таких вещей, как количество секунд в миллисекунде, которые вряд ли нужно будет менять.\n\nЭто хорошая идея или плохая идея? Я изобретаю (квадрат?) Колесо здесь? Есть ли проблемы или лучшие альтернативы, о которых я не думал?","title":"Хорошая идея или плохая идея: иметь настраиваемые тестом значения в специальном классе данных","subreddit_name_prefixed":"r/Kotlin","ups":7,"created":1544046987,"link_flair_background_color":"","id":"a3chu5","author":{"name":"Spheniscine"},"permalink":"/r/Kotlin/comments/a3chu5/good_idea_or_bad_idea_have_testconfigurable/","url":"https://www.reddit.com/r/Kotlin/comments/a3chu5/good_idea_or_bad_idea_have_testconfigurable/","created_utc":1544018187}