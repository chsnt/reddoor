{"subreddit":{"display_name":"Kotlin"},"subreddit_loc":"Котлин","selftext":"Привет всем, это первая публикация здесь.\n\nКто-нибудь уже настроил планировщик в Котлине?\n\n\n\nЯ не знаю, какой из них лучший «> (https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/java.util.-timer/schedule.html) </ SPAN>)\n\n\n\n\n\nОБНОВИТЬ:\n\n\n\nПосле некоторых исследований я решил использовать ScheduledExecutorService для управления расписаниями:\n\n\n\n    class SchedulerService (частная переменная pmsInfoService: PmsInfoService) {\n    \n    \n        веселое расписание () {\n    \n            var pmsList = pmsInfoService.findAll ()\n            val scheduler = Executors.newScheduledThreadPool (1)\n    \n            pmsList.forEach {\n    \n                val initialDelay = getDelay (it.postingTime)\n    \n                scheduler.scheduleAtFixedRate (\n                        TimedAction (это),\n                        initialDelay,\n                        ONE_DAY_INTERVAL,\n                        TimeUnit.SECONDS)\n            }\n    \n        }\n    \n        частное веселье getDelay (postingTime: LocalTime): Long {\n            var now = LocalDateTime.now ()\n            var postingDate = now.with (postingTime)\n    \n            if (postingDate <now) {\n                postingDate.plusDays (1)\n            }\n    \n            вернуть ChronoUnit.SECONDS.between (сейчас, postingDate)\n        }\n    \n    \n        сопутствующий объект: KLogging () {\n            const val ONE_DAY_INTERVAL = (24 * 60 * 60) .toLong ()\n        }\n    }\n    \n    \n\n\n\nPmsList - это список заданий, которые мне нужно запустить\n\n","title":"Планировщик Котлин","subreddit_name_prefixed":"r/Kotlin","ups":6,"created":1549412556,"link_flair_background_color":"","id":"anfpld","author":{"name":"kalangobr"},"permalink":"/r/Kotlin/comments/anfpld/scheduler_kotlin/","url":"https://www.reddit.com/r/Kotlin/comments/anfpld/scheduler_kotlin/","created_utc":1549383756}