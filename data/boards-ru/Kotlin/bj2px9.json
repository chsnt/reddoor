{"subreddit":{"display_name":"Kotlin"},"subreddit_loc":"Котлин","selftext":"Здравствуйте, я очень рад, что я переключил свои долгосрочные задачи, которые постоянно выдают ** результаты в поток пользовательского интерфейса ** на ** сопрограммы **. Это улучшило производительность и уменьшило использование памяти в 3 раза, и все утечки памяти исчезли по сравнению с AsyncTask или обычными потоками в Android. Единственная проблема остается в том, что я не знаю, как мне перезапустить мою длительную работу после того, как исключение ** произошло в какое-то время ** ...\n\nЯ чувствую, что совсем не понимаю обработку исключений в сопрограммах после прочтения тонны статей. Дайте мне знать, как я могу достичь желаемого поведения.\n\n1. У меня есть фрагмент сопрограммы во фрагменте (в ближайшее время я перейду к ВМ).\n\n\n\n        lateinit var initEngineJob: Работа\n        переопределить val coroutineContext: CoroutineContext\n            get () = initEngineJob + Dispatchers.Main\n\n\n\n2. Долгосрочная задача с асинхронным ожиданием.\n\n\n\n    весело initWorkEngineCoroutine ()\n        {\n            запуск {\n    \n                while (true) {\n                    val deferred = async (Dispatchers.Default) {\n                        getResultsFromEngine ()\n                    }\n                        val result = deferred.await ()\n                        if (result! = null) {\n                        // Поток пользовательского интерфейса\n                            рисовать !!. showResult (результат)\n                        }\n                    }\n                }\n    \n            }\n    \n    fun getResultsFromEngine (): Результат? {\n               result = // некоторые результаты от движка, который иногда выдает исключение\n               вернуть результат\n       }\n\nя не знаю, куда мне положить попробовать поймать. Я пытался окружить deferred.await () с помощью метода catch, но я не мог ** не вызвать тот же метод в блоке catch **, чтобы повторить долгосрочную задачу. Я пытался * SupervisorJob * (), но безуспешно. Я все еще не мог вызвать ** initWorkEngineCoroutine () снова ** и ** начать новую сопрограмму ** ...\n\n\nПомогите наконец решить эту проблему :)","title":"как мне повторить попытку после исключения в сопрограмме в Android?","subreddit_name_prefixed":"r/Kotlin","ups":7,"created":1556656150,"link_flair_background_color":"","id":"bj2px9","author":{"name":"wellbranding"},"permalink":"/r/Kotlin/comments/bj2px9/how_should_i_retry_after_exception_in_coroutine/","url":"https://www.reddit.com/r/Kotlin/comments/bj2px9/how_should_i_retry_after_exception_in_coroutine/","created_utc":1556627350}