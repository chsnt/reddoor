{"subreddit":{"display_name":"Kotlin"},"subreddit_loc":"Котлин","selftext":"Могу ли я использовать делегирование в конструкторе класса данных? Я не смог пока. Но давайте подведем итоги. Мы перемещаем некоторые из наших событий (классы lombok @Value) в однострочные классы данных kotlin, и с большинством из них это просто. Но в некоторых случаях мы стараемся не передавать коллекции по ссылке, как в этом примере:\n\n\n\n    @Ценность\n    public class SomethingChangedEvent {\n        Установить <Foo> foos;\n    \n        public ClassWithCollection (Collection <Foo> foos) {\n            this.foos = copyOf (nonNull (foos)? foos: new HashSet <> ());\n        }\n    }\n\n\n\nЯ попытался сделать небольшой делегат, как этот:\n\n    Класс ReadByCopyProperty <T> (частное значение val: Collection <Any>): ReadOnlyProperty <T, Collection <Any >> {\n        переопределить оператор fun getValue (thisRef: T, property: KProperty <*>): Collection <Any> = copyOf (value);\n    }\n\n\n\nпотому что я думал, что мог бы сделать что-то вроде этого:\n\n    класс данных SomethingChangedEvent (val foos: Collection <Any> by ReadByCopyProperty (foos))\n\nК сожалению, компилятор жалуется (* ожидает запятую или) *)\n\nКакой правильный синтаксис (если это возможно)? Если это невозможно, у вас есть другие предложения о том, как этого добиться?","title":"Делегирование в конструкторе класса данных","subreddit_name_prefixed":"r/Kotlin","ups":3,"created":1560907337,"link_flair_background_color":"","id":"c251l4","author":{"name":"cerebro84"},"permalink":"/r/Kotlin/comments/c251l4/delegation_in_data_class_constructor/","url":"https://www.reddit.com/r/Kotlin/comments/c251l4/delegation_in_data_class_constructor/","created_utc":1560878537}