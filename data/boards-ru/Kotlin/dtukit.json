{"subreddit":{"display_name":"Kotlin"},"subreddit_loc":"Котлин","selftext":"В настоящее время я работаю над своим первым личным проектом и пытаюсь войти на сайт Gearbox. Позвольте мне начать с того, что я пытаюсь учиться по ходу дела, поэтому я вполне могу упустить что-то невероятно легкое здесь; Я соединяю вещи по одному требованию задачи за раз. Мне удалось получить логин на [`https://shift.gearboxsoftware.com/sessions`]<span translate =\" no \"> (https: // shift.gearboxsoftware.com/sessions) </ span> через приложение PostMan со следующими запросами GET / POST:\n\n\\ - Отправьте GET в [`https: // shift.gearboxsoftware.com`] <span translate =\" no \"> (https://shift.gearboxsoftware.com/sessions) </ span>` / home`\n\n\\ - Отправьте POST на [`https://shift.gearboxsoftware.com/sessions`]<span translate =\" no \"> (https://shift.gearboxsoftware.com/sessions) </ span>, включая данные формы :\n\n* authenticity \\ _ \\ _ token = \"csrf-токен, созданный в / home\"\n* user \\ [email \\] = \"Адрес электронной почты учетной записи SHIFT\"\n* user \\ [password \\] = \"Пароль учетной записи SHIFT\"\n\n\\ - Отправьте GET на [`https://shift.gearboxsoftware.com/account`]<span translate =\" no \"> (https://shift.gearboxsoftware.com/account) </ span>, чтобы подтвердить успешную регистрацию ,\n\nТеперь ниже приведен код сборной Котлина, который я написал. В конце каждого раздела я обычно пробовал тестировать выходные данные, используя выходные данные toast и println для подтверждения данных; кажется, что меня перенаправляют на страницу входа в систему при попытке POST, и я застрял на том, почему или что еще это может понадобиться. Электронная почта и пароль поступают из двух полей EditText, которые я сейчас встроил в графический интерфейс. Я могу получить данные из первого запроса GET, никаких проблем. Это POST логина, с которым я сейчас борюсь (уверен, я буду бороться с оставшимся GET после, как-нибудь).\n\nПравильно ли я использую файлы cookie (у меня не хватает соответствующих примеров / руководств)? Файлы cookie должны позволять мне сохранять сеансы входа в систему, верно? Я правильно отправляю данные keyval? Это проблема перенаправления? Я пропускаю необходимые скрытые значения ключа? Если да, то как мне проанализировать, что требуется, а что нет (указать мне документацию / ресурсы / ссылки или отправить исправления)?\n\n    val baseURL = \"https://shift.gearboxsoftware.com\"\n                // Получить данные коробки передач / дома\n                // val gearboxHome = Jsoup.connect (\"$ baseURL / home\"). get ()\n                val gearboxHome: Connection.Response? знак равно\n                    Jsoup.connect ( \"$ BaseUrl / дом\")\n                        .timeout (0)\n                        .method (ГЭТ)\n                        .Execute ()\n                val document: документ? = gearboxHome !!. parse ()\n                val cookies = gearboxHome.cookies ()\n                \n                // Найти метатег CSRF для csrf-токена\n                val token = document? .select (\"meta [name = csrf-token]\") ?. attr (\"content\")\n    \n                // val token = gearboxHome.select (\"meta [name = csrf-token]\"). attr (\"content\")\n    \n                 val post = Jsoup.connect (\"$ baseURL / session\"). data (\n                    \"authenticity_token\", токен,\n                    \"пользователь [электронная почта]\", электронная почта,\n                    \"пользователь [пароль]\", пароль\n                ).после()\n    \n            val gearboxAccount: Connection.Response? знак равно\n                Jsoup.connect ( \"$ BaseUrl / счета\")\n                    .cookies (печенье)\n                    .timeout (0)\n                    .method (ГЭТ)\n                    .Execute ()\n    \n            if (gearboxAccount! = null) {\n                Toast.makeText (this, gearboxAccount.body (). ToString (), Toast.LENGTH_LONG) .show ()\n                Println (gearboxAccount.body (). ToString ())\n            }\n\nЯ делаю какой-то кусок этого права? Я пытаюсь учиться и строить что-то во время простоя. Любая помощь / исправления / учебники / информация с благодарностью.","title":"JSOUP POST - Персональный проект (Extra Beginner)","subreddit_name_prefixed":"r/Kotlin","ups":6,"created":1573325947,"link_flair_background_color":"","id":"dtukit","author":{"name":"JBear_Alpha"},"permalink":"/r/Kotlin/comments/dtukit/jsoup_post_personal_project_extra_beginner/","url":"https://www.reddit.com/r/Kotlin/comments/dtukit/jsoup_post_personal_project_extra_beginner/","created_utc":1573297147}