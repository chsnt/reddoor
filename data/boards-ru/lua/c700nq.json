{"subreddit":{"display_name":"lua"},"subreddit_loc":"принимать","selftext":"У меня есть сервер nginx с включенным кэшированием.\n\n\n\n          уровни proxy_cache_path / var / cache / my_proj = 1: 2 keys_zone = my_proj: 10 м max_size = 500 м неактивно = 10 дней;\n          сервер {\n            слушай 80;\n    \n            location / test1 {\n              proxy_cache my_proj;\n              proxy_cache_key $ uri;\n              proxy_pass http: // localhost: 8081;\n    \n    \n              # ???\n              # NNN_by_lua_file ./my_script.lua\n            }\n          }\n\n\n\n\n\nЕсть ли способ ** сгенерировать тело ответа \"NNN \\ _by \\ _lua \\ _file\" ** и в то же время позволить кешированию делать свою работу?\n\n\n\n** «proxy \\ _cache» и «proxy \\ _pass» должны продолжать работать правильно, ** то есть. ** И ** тело ответа должно быть сгенерировано Lua.\n\n\n\nТело ответа, генерируемого кодом Lua, будет двоичным.\n\n\n\nЯ не хочу слегка изменять ответ двоичного тела, поэтому «filter \\ _by \\ _lua» - это не то, что я ищу. Но верните новое, другое двоичное тело ответа с помощью Lua.\n\n\n\nТолько тело должно быть изменено, а не заголовки.","title":"Кэширование от nginx, тело ответа от Lua. Как?","subreddit_name_prefixed":"r/lua","ups":1,"created":1561849730,"link_flair_background_color":"","id":"c700nq","author":{"name":"Johaniao"},"permalink":"/r/lua/comments/c700nq/caching_by_nginx_the_body_of_a_response_by_lua_how/","url":"https://www.reddit.com/r/lua/comments/c700nq/caching_by_nginx_the_body_of_a_response_by_lua_how/","created_utc":1561820930}