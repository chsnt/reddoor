{"subreddit":{"display_name":"lua"},"subreddit_loc":"принимать","selftext":"unit1 = {name = \"Regect\", number = 1, primaryType = \"Energy\" ,condType = \"Terra\", HP = 300, ST = 160, PW = 260, IN = 240, RX = 180, ток HP = 300}\n    unit2 = {name = \"Worked\", number = 2, primaryType = \"Kinetic\" ,condType = \"Lux\", HP = 250, ST = 200, PW = 280, IN = 260, RX = 170, ток HP = 250}\n    \n    функция attack1 (pType, sType, level, урон бонусами, hitBonus, critBonus, атакующий, защитник)\n      крит = 5 + критБонус * 5;\n      урон = (math.floor ((1/3 * уровень) + 1,34)) + урон Бонус * 5;\n      acc = 80 + hitBonus * 10;\n      урон = урон + математика. Случайность (-15,15);\n      if (sType == attacker.pet.secondaryType) затем - [[получает ли он дополнительный тип бонуса--]]\n        крит = крит + 10;\n        урон = урон * 1,1;\n        печать («Бонус вторичного типа: да»);\n      еще\n        печать («Бонус вторичного типа: нет»);\n      конец\n      if (pType == \"Energy\") затем - [[Проверьте первичный набор текста и повреждения -]]\n        урон = урон + атакующий.pet.PW;\n        урон = урон - 0,75 * defender.pet.PW;\n      elseif (pType == \"Kinetic\") тогда\n        урон = урон + атакующий.pet.ST;\n        урон = урон - 0,75 * defender.pet.ST;\n      elseif (pType == \"Complex\") затем\n        урон = урон + атакующий.pet.PW + attacker.pet.ST;\n        урон = урон - 0,75 * (defender.pet.PW + defender.pet.ST);\n      конец\n      if (pType == attacker.pet.primaryType) затем - [[получает ли он бонус основного типа--]]\n        урон = урон * 1,25;\n        печать («Основной бонус атаки: да»);\n      еще\n        печать («Основной бонус атаки: нет»);\n      конец\n      if (nil ~ = (power (attacker.pet.secondaryType, defender.pet.secondaryType))) тогда\n        урон = урон * сила (attacker.pet.secondaryType, defender.pet.secondaryType);\n      конец\n        print (power (attacker.pet.secondaryType, defender.pet.secondaryType));\n      if (math.random (1100) <= acc) тогда - [[это ударяет -]]\n        печать («Хит: Да»);\n        if (math.random (1100) <= крит) тогда - [[делает это крит--]]\n          урон = урон * 1,25;\n          печать («Критика: Да»);\n        еще\n          печать («Критика: нет»);\n        конец\n        печать («Урон:» + Math.floor (урон));\n        defender.pet.currentHP = defender.pet.currentHP - Math.floor (урон);\n      еще\n        печать («Хит: нет»);\n      конец\n      updateHealth ();\n    конец\n\nМой код выше. Можно ли каким-то образом установить параметры «атакующий» и «защитник» равными «юнит1» и «юнит 2».? Каждый раз, когда я это делаю, кажется, что он имеет приоритет 'unit1' и не может найти attacker.pet.secondaryType. Я пытаюсь получить его, чтобы найти unit1.pet.secondaryType. Как я могу назвать это параметром? (Я понимаю, что в приведенном выше коде есть более простые варианты, но я пробовал столько, сколько мог, но это либо означает создание совершенно отдельной функции, либо огромного и длинного оператора if.)\n\nСпасибо!","title":"Использование переменных для вызова переменных?","subreddit_name_prefixed":"r/lua","ups":3,"created":1568797218,"link_flair_background_color":"","id":"d5q8i7","author":{"name":"Sethy152"},"permalink":"/r/lua/comments/d5q8i7/using_variables_to_call_variables/","url":"https://www.reddit.com/r/lua/comments/d5q8i7/using_variables_to_call_variables/","created_utc":1568768418}