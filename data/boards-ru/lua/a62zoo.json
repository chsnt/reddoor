{"subreddit":{"display_name":"lua"},"subreddit_loc":"принимать","selftext":"Я недавно заметил, что этот код:\n\n    печать (ToString (ToNumber (0/0))\n\nпечатает «nan», что в некотором роде имеет смысл в вычислительном отношении, поскольку «nan» уже является float, поэтому преобразование в «tonumber» не происходит. Имея в виду, что это Lua, а не C, я думаю, было бы гораздо более логичным, чтобы `tonumber (nan)` возвращал `nil`, как с любым значением, которое не может быть проанализировано в правильное число.\n\nС другой стороны, для таких вещей, как `tonumber (\" hello world \")\", было бы также целесообразно возвращать nan вместо nil, и это сломало бы Lua разными способами.\n\nЧто вы думаете об этом поведении?\n\nРЕДАКТИРОВАТЬ: Чтобы прояснить, почему я думаю, что эта функция может улучшить язык, помимо просто «придания большего смысла», всегда используется «tonumber», чтобы убедиться, что значение действительно является числом, с которым можно работать, и которое на самом деле не относится к Нэн в большинстве ситуаций. При написании кода вроде `local age = tonumber (age); если возраст, то ... `Я не ожидаю, что nan будет рассматриваться как действительное число, это просто нелогично и может привести к странным ошибкам, которые трудно найти.","title":"Разве `tonumber (nan)` не должен возвращать `nil` вместо` nan`?","subreddit_name_prefixed":"r/lua","ups":0,"created":1544804523,"link_flair_background_color":"","id":"a62zoo","author":{"name":"DarkWiiPlayer"},"permalink":"/r/lua/comments/a62zoo/shouldnt_tonumbernan_return_nil_instead_of_nan/","url":"https://www.reddit.com/r/lua/comments/a62zoo/shouldnt_tonumbernan_return_nil_instead_of_nan/","created_utc":1544775723}