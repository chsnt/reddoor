{"subreddit":{"display_name":"lua"},"subreddit_loc":"принимать","selftext":"Я делаю игровое приложение для Android, пока работаю в колледже, но постоянно сталкиваюсь с проблемой. Я хочу, чтобы моя игра была перезапущена после того, как вы нажмете кнопку перехода, когда она будет завершена, но я не могу заставить это работать.\n\nВот мой оригинальный код, где он выключается после нажатия, прежде чем я попытался перезапустить его.\n\nЛюбая помощь о том, как это сделать, будет принята с благодарностью.\n\n& # X200B;\n\n& # X200B;\n\n`- Определить переменные`\n\n    `rotateAmt = 5`\n    \n    `rotateMin = -90`\n    \n    `rotateMax = 90`\n    \n    `cannonRotation = 0`\n    \n    `cannonForce = 1200`\n    \n    `playerPoints = 0`\n    \n    `targetHit = false`\n    \n    `timeLeft = 600`\n\n& # X200B;\n\n& # X200B;\n\n`- Определить функции`\n\n`функция closeDownApp (событие)`\n\n    `os.exit ()`\n\n`end`\n\n& # X200B;\n\n`функция update ()`\n\n    `- уменьшить счетчик времени`\n    \n    `timeLeft = timeLeft - 1`\n    \n    `scoreDisplay.text = 'Kills:' .. playerPoints .. 'Time:' .. timeLeft`\n    \n    `- проверить, не истекло ли время`\n    \n    `if (timeLeft <= 0) тогда`\n    \n    `- показать окончательный счет`\n    \n    `scoreDisplay.text = 'Ваш счет был' .. playerPoints`\n    \n    `- удалить все экранные объекты`\n    \n    `Display.remove (cannonBarrel)`\n    \n    `Display.remove (цель)`\n    \n    `Display.remove (upButton)`\n    \n    `Display.remove (downButton)`\n    \n    `Display.remove (fireButton)`\n    \n    `- показать знак 'игра окончена'\n    \n    `gameOver = display.newImage ('gameover.png', 150, 75)`\n    \n    `gameOver: addEventListener ('tap', closeDownApp)`\n    \n    `- создать группу`\n    \n    `end`\n    \n    \n    \n    `- проверить, если цель была поражена`\n    \n    `if (targetHit == true) then`\n    \n    `targetHit = false`\n    \n    `playerPoints = playerPoints + 1`\n    \n    `Hit = display.newImage ('Hit.png', target.x, target.y)`\n    \n    `- замените цель изображением попадания`\n    \n    `transition.dissolve (Hit, target, 1000, 0)`\n    \n    `Display.remove (пули)`\n    \n    `- вернуть цель назад в случайную позицию`\n    \n    `target.x = math.random (280, 500)`\n    \n    `target.y = math.random (100, 290)`\n\n`end`\n\n`end`\n\n& # X200B;\n\n`функция onCollide (событие)`\n\n    `TargetHit = true`\n\n`end`\n\n& # X200B;\n\n`функция огня (событие)`\n\n    `- только огонь в начале сенсорного события`\n    \n    `if (event.phase == 'начал') затем`\n    \n    `Media.playSound ( 'bang.wav')`\n    \n    `bullet = display.newImage ('bullet.png')`\n    \n    `- переместить изображение`\n    \n    `bullet.x, bullet.y = cannonBarrel: localToContent (70, 0)`\n    \n    `bullet.rotation = cannonRotation`\n    \n    `- применить физику к пушечному ядру`\n    \n    `Physics.addBody (пуля, {плотность = 2,0, трение = 0,2, радиус = 15})`\n    \n    `- определить подходящее соотношение горизонтальной и вертикальной силы`\n    \n    `force_x = math.cos (math.rad (cannonRotation)) * cannonForce`\n    \n    `force_y = math.sin (math.rad (cannonRotation)) * cannonForce`\n    \n    `- огонь пушечным ядром`\n    \n    `bullet: applyForce (force_x, force_y, bullet.x, bullet.y)`\n    \n    `end`\n\n`end`\n\n& # X200B;\n\n`функция moveDown (событие)`\n\n    `- только перемещать ствол, если событие касания началось`\n    \n    `if (event.phase == 'начал') затем`\n    \n    `cannonRotation = cannonRotation + rotateAmt`\n    \n    `if (cannonRotation> = rotateMax) then`\n    \n    `cannonRotation = rotateMax`\n    \n    `end`\n    \n    `cannonBarrel.rotation = cannonRotation`\n    \n    `fireButton.rotation = cannonRotation`\n    \n    `end`\n\n`end`\n\n& # X200B;\n\n`функция moveUp (событие)`\n\n    `- только перемещать ствол, если событие касания началось`\n    \n    `if (event.phase == 'начал') затем`\n    \n    `cannonRotation = cannonRotation - rotateAmt`\n    \n    `if (cannonRotation <= rotateMin) then`\n    \n    `cannonRotation = rotateMin`\n    \n    `end`\n    \n    `cannonBarrel.rotation = cannonRotation`\n    \n    `fireButton.rotation = cannonRotation`\n    \n    `end`\n\n`end`\n\n& # X200B;\n\n`функция makeTarget ()`\n\n    `target = display.newImage ('target.png')`\n    \n    `target.x = math.random (280, 450)`\n    \n    `target.y = math.random (100, 290)`\n    \n    `Physics.addBody (цель, {плотность = 1,0, трение = 0,5, отскок = 0,05, радиус = 15})`\n    \n    `target.bodyType = 'static'`\n    \n    `target: addEventListener ('collision', onCollide)`\n\n`end`\n\n& # X200B;\n\n`функция makeInterface ()`\n\n    `- кнопка вверх`\n    \n    `upButton = display.newImage ('up_button.png')`\n    \n    `UpButton: перевод (3, 37)`\n    \n    `upButton: addEventListener ('touch', moveUp)`\n    \n    `- кнопка вниз`\n    \n    `downButton = display.newImage ('down_button.png')`\n    \n    `downButton: перевод (3, 176)`\n    \n    `downButton: addEventListener ('touch', moveDown)`\n    \n    `- кнопка огня`\n    \n    `fireButton = display.newImage ('fire_button.png')`\n    \n    `fireButton: translate (19, 124)`\n    \n    `fireButton: addEventListener ('touch', fire)`\n    \n    `--display части пушки`\n    \n    `cannonBarrel = display.newImage ('cannon_barrel.png')`\n    \n    `cannonBarrel: перевод (73, 109)`\n    \n    `--display Score`\n    \n    `scoreDisplay = display.newText (('Points:' .. playerPoints), 70, -18, native.systemFont, 20)`\n    \n    `scoreDisplay: setTextColor (255,255,255)`\n    \n    `ScoreDisplay: перевод (display.contentHeight / 2, 30)`\n\n`end`\n\n& # X200B;\n\n`- Определить структуру управления`\n\n`функция init ()`\n\n    `audio.stop (1)`\n    \n    `Display.setStatusBar (display.HiddenStatusBar)`\n    \n    `background = display.newImage ('bg.jpg')`\n    \n    `физика = требуется ('физика')`\n    \n    `Physics.setDrawMode ( 'нормальный')`\n    \n    Physics.start ()\n    \n    `makeInterface ()`\n    \n    `makeTarget ()`\n    \n    Runtime: addEventListener ('enterFrame', обновление) `\n    \n    `local backgroundMusic = audio.loadStream (\" theme.mp3 \")`\n    \n    `local backgroundMusicChannel =` [`audio.play`] (https://audio.play)` (backgroundMusic, {channel = 2, loops = -1, fadein = 10}) `\n    \n    `audio.setVolume (0.5, {channel = backgroundMusicChannel})`\n\n`end`\n\n& # X200B;\n\n`функция introScreen ()`\n\n    `local backgroundMusic1 = audio.loadStream (\" intro.mp3 \")`\n    \n    `local backgroundMusicChannel1 =` [`audio.play`] (https://audio.play)` (backgroundMusic1, {channel = 1, loops = 1, fadein = 10}) `\n    \n    `- Показать фон\n    \n    `background = display.newImage (\" IntroScreen.png \")`\n    \n    `- Показать кнопку воспроизведения в правом верхнем углу`\n    \n    `playBtn = display.newImage (\" playBtn.png \", 350, 10)`\n    \n    `playBtn: addEventListener ('tap', init)`\n\n`end`\n\n& # X200B;\n\n`- Позвони на код`\n\n`IntroScreen (`","title":"LUA нужна помощь с моей игрой","subreddit_name_prefixed":"r/lua","ups":0,"created":1550006118,"link_flair_background_color":"","id":"apt7my","author":{"name":"SamShanks"},"permalink":"/r/lua/comments/apt7my/lua_need_help_with_my_game/","url":"https://www.reddit.com/r/lua/comments/apt7my/lua_need_help_with_my_game/","created_utc":1549977318}