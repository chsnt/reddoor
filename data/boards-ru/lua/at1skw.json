{"subreddit":{"display_name":"lua"},"subreddit_loc":"принимать","selftext":"В качестве своего рода практического упражнения и чтобы увидеть, как быстро я смогу это сделать, я написал эту функцию, которая выполняет интерполяцию строк в Lua подобно тому, как она работает в таких языках, как Ruby.\n\n[Вот код]  (https://gist.github.com/DarkWiiPlayer/9cb8634aafe95885779282800088b526) \n\n~~ И [вот это repl.it]  (https://repl.it/@DarkWiiPlayer/Lua-String-Interpolation?language=lua&folderId=) , чтобы вы могли поиграть с этим :) сломано, я попытаюсь исправить это позже\n\n# Некоторые заметки:\n\nОсновная идея заключается в том, чтобы просто скомпилировать строку вида `\" hello # {name} \"` в `\" hello \"..tostring (name)`. Основная проблема здесь заключается в том, что после компиляции строки ее необходимо загрузить обратно в Lua и выполнить, после чего она получает свою собственную область и больше не может использовать переменные. По этой причине мне нужно использовать библиотеку отладки, чтобы получить локальные данные области видимости, где выполняется интерполяция, и с этим она, кажется, работает довольно хорошо\n\nПожалуйста, даже не думайте о производительности, она не оптимизирована, а сама концепция ужасно медленная.","title":"Еще одна попытка интерполяции строки :)","subreddit_name_prefixed":"r/lua","ups":5,"created":1550774987,"link_flair_background_color":"","id":"at1skw","author":{"name":"DarkWiiPlayer"},"permalink":"/r/lua/comments/at1skw/yet_another_string_interpolation_attempt/","url":"https://www.reddit.com/r/lua/comments/at1skw/yet_another_string_interpolation_attempt/","created_utc":1550746187}