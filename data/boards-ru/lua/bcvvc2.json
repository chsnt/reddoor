{"subreddit":{"display_name":"lua"},"subreddit_loc":"принимать","selftext":"Я использую программу awk для анализа метаданных mpris2 и вывода запрошенных метаданных на информационную панель 'conky'.\n\nЕсли предисловие, я не знаю lua или c, но я пытаюсь использовать этот маленький проект как возможность познакомиться с lua.\n\nТекстовая строка, которой я пытаюсь манипулировать, имеет переменную длину. Я хочу, чтобы текст:\n\n1. Быть сосредоточенным в своем контейнере\n1. Когда он изменится в длине, чтобы расширить / сжать от центра строки.\n\nПункт 1 решен. Я не могу понять пункт 2. Кажется, что строка изначально центрирована, но когда она меняет длину, она всегда растет / сжимается вправо, как ее выравнивание по левому краю.\n\nВот соответствующая часть сценария:\n\n        cairo_set_source_rgba (cr, color_convert (0x5C717B, 1))\n        локальные экстенты = cairo_text_extents_t: create ()\n        tolua.takeownership (экстентов)\n        местный utf8 = \"Каир\"\n        местный х, у\n        cairo_select_font_face (cr, «Roboto Condensed», CAIRO_FONT_SLANT_NORMAL, CAIRO_FONT_WEIGHT_BOLD)\n        cairo_set_font_size (cr, 12)\n        cairo_text_extents (cr, utf8, экстенты)\n        cairo_set_line_width (кр, 6.0)\n        х = 128,0 - (extents.width / 2 + extents.x_bearing)\n        у = 128,0 - (extents.height / 2 + extents.y_bearing)\n    \n        cairo_move_to (кр, х, у)\n        cairo_show_text (кр, текст)\n\nПо общему признанию, я немного над головой. Я просто фотограф, который пытается научиться программированию, когда время идет. Если есть что-то, что выглядит здесь не так, или у вас есть какие-либо мысли по поводу этого, я весь в ушах! Спасибо за ваше время.\n\nНаконец, вот дерьмовый GIF, который может показать проблему лучше, чем я могу объяснить.\n\nhttps://imgur.com/a/vfpc2cO","title":"Каир, Конки: Центр выравнивания текста","subreddit_name_prefixed":"r/lua","ups":1,"created":1555221992,"link_flair_background_color":"","id":"bcvvc2","author":{"name":"Vredesbyyrd"},"permalink":"/r/lua/comments/bcvvc2/cairo_conky_center_align_text/","url":"https://www.reddit.com/r/lua/comments/bcvvc2/cairo_conky_center_align_text/","created_utc":1555193192}